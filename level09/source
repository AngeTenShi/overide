#include <stdio.h>
#include <string.h>

struct user {
    char username[128];
    char msg[1024];
    int len;
};

char *set_msg(struct user *info)
{
    char s[1024];

    memset(s, 0, sizeof(s));
    puts(">: Msg @Unix-Dude");
    printf(">>: ");
    fgets(s, 1024, stdin);
    strncpy(info->msg, s, info->len);
}

void set_username(struct user *info)
{
    char s[128];
    
    memset(s, 0, sizeof(s));
    puts(">: Enter your username");
    printf(">>: ");
    fgets(s, sizeof(s), stdin);
    strncpy(info->username, s, 40);
    printf(">: Welcome, %s", info->username);
}

void handle_msg()
{
    struct user user_info;
    set_username(&user_info);
    set_msg(&user_info);
    puts(">: Msg sent!");
}

int main(int argc, const char** argv, const char** envp)
{
    puts(
        "--------------------------------------------\n"
        "|   ~Welcome to l33t-m$n ~    v1337        |\n"
        "--------------------------------------------");
    handle_msg();
    return 0;
}
